# C语言笔记

## 变量

### 声明和定义

**声明**(Declaration)和**定义**(Definition)关系:

一个声明同时也要求分配存储空间，则称为**定义**。反之，则只是**声明**。



### 局部变量与全局变量



1. **局部变量**可以用任意类型相符的表达式来初始化。**全局变量**只能用**常量表达式**来初始化。

   > 原因：全局变量的初始值要求保存在编译生成的目标代码中，所以必须在编译时计算出来。

2. 全局变量定义时不初始化，则初始值为0。而局部变量定义时不初始化，则初始值不确定。

   >局部变量在使用前一定要先赋值，防止引入bug。





## 表达式

表达式是由<a href="#exp_primary">初等表达式<a>与运算符构成的一个合乎C语言语法的序列组合。

表达式核心功能:**求值**。求值之外的所有功能都称为**副作用**/**副效应**(Side Effect)。

>如printf()函数为例，以下是printf函数的<a href="#func_prototype">声明</a>
>
>```c
>int printf(const char *format, ...);
>```
>
>从printf 函数的声明可以得到以下结论:
>
>* printf 函数的返回值为printf函数中字符的数量
>* printf 函数将内容显示到屏幕上，这就叫printf函数的"副作用"(Side Effect)







### <a id="exp_primary">初等表达式</a>

Primary Expressions **初等表达式**，也译为"主表达式"、"元表达式"



初等表达式有以下几种:

* 变量名或函数名

* 常量

* 文字串字面量

  





## 函数

每次函数调用时，分配参数和局部变量的存储空间，称为一个**栈帧**(Stack Frame)。

系统为每个程序的运行预留了栈空间，函数调用时就在这个栈空间里分配栈帧，函数返回时就释放栈帧。



### <a id="func_prototype">函数声明</a>

函数声明也叫做函数原型（prototype）。

函数原型语法格式:

```c
函数类型 函数名(参数列表);
```

函数原型的功能是将有关函数的信息告知编译器。



没有函数体的函数声明，它为编译器提供了生成指令的模板。

函数原型必须出现在函数调用之前，这是遵循"**先声明后使用**"的原则，所以函数原型应放在第一个函数之前，最好将所有的函数原型放在一起。









### 函数定义

函数定义(Function Definition) 是指在代码中具体写出函数完成任务的步骤和方法。编译器只有见到函数定义才会生成指令。

函数定义包括两个部分：

* <a href="#func_head">函数头</a>
* <a href="#func_body">函数体</a>



#### <a id="func_head">函数头</a>

函数头由三部分组成:

1. 返回值类型

2. 函数名

3. 参数列表

   

函数头部分和函数声明非常类似，区别函数声明是以**;**结束。

**函数原型**并不必与**函数头**完全相同。参数的名称可以不同，只要参数**类型、数目、顺序相同**既可。也就是说函数原型除了参数名称外，函数原型必须也函数头一致。



##### 返回值类型

从表达式角度，表达式核心功能是"求值"，而函数调用也是一种表达式，函数调用中那对小括号"()"，就是函数调用运算符。

所以称"**返回值类型**"，是从表达式角度看函数。

如果从数据角度看函数，将函数当成数据的一种，可以认为函数是一种相对动态的数据，这数据的确定有时需要外部参数参与，需要一条或多条语句共同完成。而从数据定义角度观察函数头，就会发现以下语法现象:

​			变量定义: **类型** **变量名**

​			函数头定义: **返回值类型** **函数名**

可以看到函数头的定义，与普通变量的定义是类似的，返回值就相当于变量的数据类型。

所以从数据角度，可以认为函数返回值类型，就是函数这种**特殊**数据的数据类型。





#### <a id="func_body">函数体</a>















### Return语句

return语句的主要作用是推荐整个函数的返回值，并结束当前函数的执行。

在没有返回值函数中使用return语句，相当于结束当前函数的执行。

函数的返回值不是左值，所以无法对其赋值。

函数的返回值 也是按值传递。

```c
return x; //返回的是变量x的值，而非变量x本身
```



### 递归

函数自己直接或间接调用自己，称其为**递归函数**(Recursive)。



## 结构体







